{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import{open,close,loadingflas}from'../../redux/popupSlice';import\"../../css/page-jobsearch-info.css\";import Layout from\"../../layout/Layout\";import Button from\"../../component/Button\";import*as APIS from\"../../utils/service\";import consts from\"../../libs/consts\";import{API_URL}from'../../libs/apiUrl';import moment from'moment';import{selectUserInfo}from'../../redux/userSlice';import{MessageSend}from'../../component/popups/MessageBox';import{DefaultImg,DefaultPfofile}from'../../component/DefaultImg';import{addHyphenToPhoneNumber,goBackPage}from'../../utils/utils';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function JobOfferInfo(_ref){var _UserData$userInfo2,_searchData$writer,_searchData$writer2,_searchData$writer3,_searchData$writer4,_UserData$userInfo3,_searchData$desc;let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const UserData=useSelector(selectUserInfo);const params=new URLSearchParams(window.location.search);const[searchData,setSearData]=useState({});const[like,setLike]=useState(0);const[likeCheck,setLikeCheck]=useState(false);const[message,setMessage]=useState();const[isSend,setIsSend]=useState(false);const loadData=function(){let init=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;dispatch(loadingflas({loading:true}));APIS.postData(API_URL.jobSearch.info,{idx:params.get(\"idx\"),init}).then(result=>{var _result$data,_result$data2;dispatch(loadingflas({loading:false}));setSearData(result.data);setLike(result===null||result===void 0?void 0:(_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.like_cnt);setLikeCheck(result===null||result===void 0?void 0:(_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.like_check);console.log(result.data);}).catch(e=>{var _e$response,_e$response$data,_e$response2,_e$response2$data;dispatch(loadingflas({loading:false}));// goBackPage(navigate);\nlet msg=(_e$response=e.response)!==null&&_e$response!==void 0&&(_e$response$data=_e$response.data)!==null&&_e$response$data!==void 0&&_e$response$data.msg?(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.msg:\"존재하지 않는 게시물입니다.\";alert(msg);window.close();navigate(\"/\");});};const requestLike=()=>{APIS.postData(API_URL.jobSearch.like,{idx:params.get(\"idx\")}).then(result=>{var _result$data3,_result$data4;dispatch(loadingflas({loading:false}));setLikeCheck(result===null||result===void 0?void 0:(_result$data3=result.data)===null||_result$data3===void 0?void 0:_result$data3.like_check);setLike(result===null||result===void 0?void 0:(_result$data4=result.data)===null||_result$data4===void 0?void 0:_result$data4.like_cnt);console.log(result.data);}).catch(e=>{dispatch(loadingflas({loading:false}));});};const requestDelete=idx=>{APIS.postData(API_URL.jobSearch.delete,{idx}).then(result=>{dispatch(loadingflas({loading:false}));alert(\"삭제되었습니다.\");goBackPage(navigate);console.log(result.data);}).catch(e=>{dispatch(loadingflas({loading:false}));});};const requestMessage=()=>{let sendData={target_idx:searchData===null||searchData===void 0?void 0:searchData.u_idx,desc:message};console.log(sendData);dispatch(loadingflas({loading:true}));APIS.postData(API_URL.user.sendMessage,sendData).then(result=>{dispatch(loadingflas({loading:false}));}).catch(e=>{dispatch(loadingflas({loading:false}));});};useEffect(()=>{if(isSend){setIsSend(false);requestMessage();}},[isSend]);const sendMessage=()=>{var _UserData$userInfo;if((searchData===null||searchData===void 0?void 0:searchData.u_idx)===((_UserData$userInfo=UserData.userInfo)===null||_UserData$userInfo===void 0?void 0:_UserData$userInfo.idx)){toast(\"본인 게시글입니다.\");return;}dispatch(open({component:/*#__PURE__*/_jsx(MessageSend,{onChange:setMessage,noneMt:true}),button:\"쪽지보내기\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());setIsSend(true);},onCancelPress:()=>{dispatch(close());}}));};useEffect(()=>{loadData();},[]);return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"jobSearchInfoContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{window.close();navigate(\"/\",{replace:true});}}),/*#__PURE__*/_jsxs(\"div\",{className:\"titleInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[\"\\uCD5C\\uCD08\\uB4F1\\uB85D \",moment(searchData===null||searchData===void 0?void 0:searchData.create_dt).format(\"YY-MM-DD\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"view\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/eye-line.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"count\",children:searchData===null||searchData===void 0?void 0:searchData.view})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"likeInfo\",onClick:requestLike,children:[likeCheck?/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/heart-3-fill.svg\",alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/heart-3-line-disable.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:like})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-title-24 header-add-btn-box\",children:[\"\\uAD6C\\uC9C1 \\uC815\\uBCF4\",/*#__PURE__*/_jsx(\"div\",{className:\"search-report-btn\",children:(searchData===null||searchData===void 0?void 0:searchData.u_idx)===((_UserData$userInfo2=UserData.userInfo)===null||_UserData$userInfo2===void 0?void 0:_UserData$userInfo2.idx)?/*#__PURE__*/_jsxs(\"div\",{class:\"drop-down\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"drop-btn\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"drop-down-content\",children:[/*#__PURE__*/_jsx(\"a\",{style:{cursor:\"pointer\"},onClick:()=>{navigate(\"/jobsearchEdit?idx=\".concat(searchData===null||searchData===void 0?void 0:searchData.idx));},children:\"\\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"a\",{style:{cursor:\"pointer\"},onClick:()=>{dispatch(open({content:\"삭제하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());requestDelete(params.get(\"idx\"));},onCancelPress:()=>{dispatch(close());}}));},children:\"\\uC0AD\\uC81C\\uD558\\uAE30\"})]})]}):/*#__PURE__*/_jsx(Button,{titleimgs:\"/images/icons/alarm-warning-line.svg\",buttonTxt:\"\\uC2E0\\uACE0\\uD558\\uAE30\",buttonShape:\"red\",buttonSize:\"small\",onPress:()=>{navigate(\"/reportJobsearch?idx=\".concat(params.get(\"idx\")));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchInfoBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-search-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"iconBox\",children:/*#__PURE__*/_jsx(\"img\",{src:consts.s3url+(searchData===null||searchData===void 0?void 0:(_searchData$writer=searchData.writer)===null||_searchData$writer===void 0?void 0:_searchData$writer.profile),alt:\"\",onError:DefaultPfofile})}),/*#__PURE__*/_jsxs(\"div\",{className:\"detailInfoBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:(_searchData$writer2=searchData.writer)===null||_searchData$writer2===void 0?void 0:_searchData$writer2.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uCE74\\uD1A1ID\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:(_searchData$writer3=searchData.writer)===null||_searchData$writer3===void 0?void 0:_searchData$writer3.kakao_id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC5F0\\uB77D\\uCC98\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:addHyphenToPhoneNumber(searchData===null||searchData===void 0?void 0:(_searchData$writer4=searchData.writer)===null||_searchData$writer4===void 0?void 0:_searchData$writer4.hp)})]})]})]}),(searchData===null||searchData===void 0?void 0:searchData.u_idx)!==((_UserData$userInfo3=UserData.userInfo)===null||_UserData$userInfo3===void 0?void 0:_UserData$userInfo3.idx)&&/*#__PURE__*/_jsxs(\"div\",{className:\"job-search-btnbox\",children:[/*#__PURE__*/_jsx(Button,{buttonTxt:\"\\uCABD\\uC9C0\\uBB38\\uC758\",buttonShape:\"white\",onPress:sendMessage}),/*#__PURE__*/_jsx(Button,{buttonTxt:\"\\uC804\\uD654\\uBB38\\uC758\",onPress:()=>{var _UserData$userInfo4,_searchData$writer5;if((searchData===null||searchData===void 0?void 0:searchData.u_idx)===((_UserData$userInfo4=UserData.userInfo)===null||_UserData$userInfo4===void 0?void 0:_UserData$userInfo4.idx)){toast(\"본인 게시글입니다.\");return;}document.location.href=\"tel:\".concat(searchData===null||searchData===void 0?void 0:(_searchData$writer5=searchData.writer)===null||_searchData$writer5===void 0?void 0:_searchData$writer5.hp);}})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"infoBox mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-info-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-24\",children:\"\\uD504\\uB85C\\uD544 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC131\\uBCC4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[searchData===null||searchData===void 0?void 0:searchData.gender,\"\\uC138\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uB098\\uC774\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[searchData===null||searchData===void 0?void 0:searchData.age,\"\\uC138\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD559\\uB825\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:searchData.education})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uACBD\\uB825\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:(searchData===null||searchData===void 0?void 0:searchData.career_option)==1?\"신입\":\"\".concat(searchData===null||searchData===void 0?void 0:searchData.career,\"\\uB144\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD654\\uBB3C\\uC6B4\\uC1A1\\uC885\\uC0AC\\uC790\\uACA9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData!==null&&searchData!==void 0&&searchData.cargo_option?\"있음\":\"없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC704\\uD5D8\\uBB3C\\uC6B4\\uC1A1\\uC790\\uC99D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData!==null&&searchData!==void 0&&searchData.danger_option?\"있음\":\"없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uBCF4\\uAC74\\uC99D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData!==null&&searchData!==void 0&&searchData.health_option?\"있음\":\"없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAC74\\uC124\\uAE30\\uACC4\\uC870\\uC885\\uC0AC\\uBA74\\uD5C8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData!==null&&searchData!==void 0&&searchData.machineruy_option?\"있음\":\"없음\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-24\",children:\"\\uD76C\\uB9DD \\uC870\\uAC74\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC6B4\\uD589\\uCC28\\uB7C9\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[searchData===null||searchData===void 0?void 0:searchData.type,\" \",searchData===null||searchData===void 0?void 0:searchData.ton,\" \\uD1A4\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD488\\uBAA9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:searchData.item})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uCD9C\\uADFC\\uC9C0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[searchData===null||searchData===void 0?void 0:searchData.go_sido,\" \",searchData===null||searchData===void 0?void 0:searchData.go_sigungu]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC0C1\\uD558\\uCC28\\uD615\\uD0DC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:searchData.unloading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uADFC\\uBB34\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:searchData.work})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uADFC\\uBB34\\uC694\\uC77C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:searchData.work})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAE09\\uC5EC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:searchData===null||searchData===void 0?void 0:searchData.work})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-24\",children:\"\\uC0C1\\uC138 \\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-text\",dangerouslySetInnerHTML:{__html:searchData===null||searchData===void 0?void 0:(_searchData$desc=searchData.desc)===null||_searchData$desc===void 0?void 0:_searchData$desc.replaceAll(\"\\n\",\"<br>\")}})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}