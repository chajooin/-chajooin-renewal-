{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import\"../../css/my/my-phone.css\";import Layout from\"../../layout/Layout\";import Button from'../../component/Button';import MyNavigator from\"./components/MyNavigator\";import*as APIS from\"../../utils/service\";import{API_URL}from'../../libs/apiUrl';import{goBackPage,numFormat}from'../../utils/utils';import Input from'../../component/Input';import{close,open}from'../../redux/popupSlice';import{selectUserInfo}from'../../redux/userSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyPhone(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const{userInfo}=useSelector(selectUserInfo);const[isTimer,setTimer]=useState(false);const[phone,setPhone]=useState(\"\");const[phLock,setphLock]=useState(\"\");const[phoneErr,setPhoneErr]=useState(\"\");const[authNum,setAuthNum]=useState(\"\");const[authNumErr,setAuthNumErr]=useState(\"\");const openPopup=msg=>{dispatch(open({content:msg,onCancelPress:false,titleviewer:false,button:\"확인\",onPress:()=>{dispatch(close());}}));};const sendAuthNum=()=>{APIS.postData(API_URL.user.sendAuth,{hp:phone}).then(result=>{setphLock(true);setTimer(true);}).catch(e=>{console.log(e.response.data);let data=e.response.data;setPhoneErr(data.msg);});};const sendCheckAuth=()=>{APIS.postData(API_URL.user.checkAuth,{certification:authNum}).then(result=>{dispatch(open({content:\"휴대폰 변경이 완료되었습니다.\",onCancelPress:false,titleviewer:false,button:\"확인\",onPress:()=>{dispatch(close());goBackPage(navigate);}}));}).catch(e=>{console.log(e.response.data);let data=e.response.data;setAuthNumErr(data===null||data===void 0?void 0:data.msg);});};return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"myPhoneContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{navigate(\"/mypageInfo\",{replace:true});}}),/*#__PURE__*/_jsx(\"div\",{className:\"titleInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"\\uD734\\uB300\\uD3F0 \\uBCC0\\uACBD\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-alamContain\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",onClick:()=>{navigate(\"/message\");},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/mail-line.svg\",alt:\"\"}),(userInfo===null||userInfo===void 0?void 0:userInfo.message_count)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"num\",children:userInfo===null||userInfo===void 0?void 0:userInfo.message_count})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsx(MyNavigator,{list:[{title:\"마이\"},{title:\"내정보\"},{title:\"휴대폰 변경\",isSelect:true}]}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"big-title\",children:\"\\uD734\\uB300\\uD3F0 \\uBCC0\\uACBD\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"phone-number-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD734\\uB300\\uD3F0 \\uBC88\\uD638\\uB97C \\uC778\\uC99D\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(Input,{className:\"inputs input-315\",placeholder:\"\\u201C-\\u201D \\uC5C6\\uC774 \\uC22B\\uC790\\uB9CC \\uC785\\uB825\",setValue:v=>{setPhone(v);if(phoneErr)setPhoneErr(\"\");},value:phone,error:phoneErr,readOnly:phLock,type:\"number\",valid:\"number\"}),/*#__PURE__*/_jsx(Button,{styles:{width:80},buttonTxt:\"\\uC778\\uC99D\\uC694\\uCCAD\",onPress:()=>{console.log(\"인증번호 요청\");sendAuthNum();},disabled:phLock})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"phone-number-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC778\\uC99D\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(Input,{className:\"inputs input-315\",placeholder:\"\\uC778\\uC99D\\uBC88\\uD638 \\uC785\\uB825\",setValue:v=>{setAuthNum(v);if(authNumErr)authNumErr(\"\");},value:authNum,timer:isTimer,timerState:()=>{openPopup(\"인증시간이 만료되었습니다.\");setphLock(false);setTimer(false);},error:authNumErr,readOnly:!isTimer,type:\"number\"}),/*#__PURE__*/_jsx(Button,{styles:{width:80},buttonTxt:\"\\uC778\\uC99D\\uD558\\uAE30\"// buttonSize=\"large\"\n,onPress:()=>{sendCheckAuth();},disabled:!isTimer})]})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}