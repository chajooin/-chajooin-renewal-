{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import\"../../css/quick-menu.css\";import Layout from\"../../layout/Layout\";import Checkbox from'../../component/Checkbox';import Button from'../../component/Button';import InputFileMulti from'../../component/InputFileMulti';import*as APIS from\"../../utils/service\";import{API_URL}from'../../libs/apiUrl';import{dateMinformat}from'../../utils/utils';import{close,open}from'../../redux/popupSlice';import{loadUserInfo}from'../../redux/userSlice';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Notification(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const params=useParams();const[list,setList]=useState([]);const loadList=()=>{APIS.postData(API_URL.user.alarm).then(result=>{setList(result.data);}).catch(e=>{console.log(e.responce);});};const delItem=idx=>{if(idx){APIS.postData(API_URL.user.delAlarm,{idx}).then(result=>{loadList();toast(\"삭제되었습니다.\");dispatch(loadUserInfo());}).catch(e=>{console.log(e.responce);loadList();});}else{// 전체삭제\nAPIS.postData(API_URL.user.delAlarm,{}).then(result=>{loadList();toast(\"삭제되었습니다.\");dispatch(loadUserInfo());}).catch(e=>{console.log(e.responce);loadList();});}};let timer=null;const handleScroll=()=>{if(timer){clearTimeout(timer);}timer=window.setTimeout(()=>{console.log(document.documentElement.scrollHeight-document.documentElement.clientHeight,window.scrollY);let totalScroll=document.documentElement.scrollHeight-document.documentElement.clientHeight;let curScroll=window.scrollY;if(totalScroll==window.scrollY){//마지막\n}},500);};const initScroll=()=>{window.addEventListener(\"scroll\",handleScroll);};useEffect(()=>{console.log(\"render!\");// initScroll();\nloadList();return()=>[window.removeEventListener(\"scroll\",handleScroll)];},[]);return/*#__PURE__*/_jsx(Layout,{header:true,footters:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"notificationContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quick-menu-title-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC54C\\uB9BC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-box\",children:/*#__PURE__*/_jsx(Button,{buttonTxt:\"\\uC804\\uCCB4\\uC0AD\\uC81C\",buttonShape:\"gray\"// buttonSize=\"small\"\n,onPress:()=>{dispatch(open({content:\"알림목록에서 모두 삭제하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());delItem(\"all\");},onCancelPress:()=>{dispatch(close());}}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-box\",children:[list.map((v,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"list-item\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>{dispatch(open({content:\"알림목록에서 삭제하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());delItem(v.idx);},onCancelPress:()=>{dispatch(close());}}));}}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{if(v!==null&&v!==void 0&&v.c_idx){navigate(\"/mypageCalendarInfo?idx=\"+(v===null||v===void 0?void 0:v.c_idx));}else{if((v===null||v===void 0?void 0:v.board)==1){window.open(\"/usedCarInfo?idx=\"+(v===null||v===void 0?void 0:v.board_idx));}else if((v===null||v===void 0?void 0:v.board)==2){window.open(\"/rentedCarInfo?idx=\"+(v===null||v===void 0?void 0:v.board_idx));}else if((v===null||v===void 0?void 0:v.board)==3){window.open(\"/jobofferInfo?idx=\"+(v===null||v===void 0?void 0:v.board_idx));}else if((v===null||v===void 0?void 0:v.board)==4){window.open(\"/jobsearchInfo?idx=\"+(v===null||v===void 0?void 0:v.board_idx));}else if((v===null||v===void 0?void 0:v.board)==5){window.open(\"/boardInfo?idx=\"+(v===null||v===void 0?void 0:v.board_idx));}}},children:[/*#__PURE__*/_jsx(\"div\",{className:\"message\",dangerouslySetInnerHTML:{__html:v.title}}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:v.board_title}),/*#__PURE__*/_jsx(\"div\",{className:\"sub-title\",children:v.board_sub_data}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:dateMinformat(v.create_dt,false)})]})]},\"qm-nli-\".concat(i))),list.length<=0&&/*#__PURE__*/_jsx(\"div\",{className:\"quick-menu-noneitem\",children:\"\\uBAA9\\uB85D\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}