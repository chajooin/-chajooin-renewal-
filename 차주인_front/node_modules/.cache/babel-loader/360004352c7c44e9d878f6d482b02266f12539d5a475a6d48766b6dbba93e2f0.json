{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import{open,close,loadingflas}from'../../redux/popupSlice';import\"../../css/page-joboffer-info.css\";import Layout from\"../../layout/Layout\";import Button from\"../../component/Button\";import*as APIS from\"../../utils/service\";import consts from\"../../libs/consts\";import{API_URL}from'../../libs/apiUrl';import moment from'moment';import{addHyphenToPhoneNumber,goBackPage,numFormat}from'../../utils/utils';import{selectUserInfo}from'../../redux/userSlice';import{DefaultImg,DefaultPfofile}from'../../component/DefaultImg';import{MessageSend}from'../../component/popups/MessageBox';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function JobOfferInfo(_ref){var _UserData$userInfo2,_offerInfo$writer,_offerInfo$writer2,_offerInfo$writer3,_offerInfo$writer4,_offerInfo$writer5,_UserData$userInfo3,_offerInfo$desc;let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const params=new URLSearchParams(window.location.search);const UserData=useSelector(selectUserInfo);const[offerInfo,setOfferInfo]=useState({});const[like,setLike]=useState(0);const[likeCheck,setLikeCheck]=useState(false);const[message,setMessage]=useState();const[isSend,setIsSend]=useState(false);const loadData=function(){let init=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;dispatch(loadingflas({loading:true}));APIS.postData(API_URL.jobOffer.info,{idx:params.get(\"idx\"),init}).then(result=>{var _result$data,_result$data2;dispatch(loadingflas({loading:false}));setOfferInfo(result.data);setLike(result===null||result===void 0?void 0:(_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.like_cnt);setLikeCheck(result===null||result===void 0?void 0:(_result$data2=result.data)===null||_result$data2===void 0?void 0:_result$data2.like_check);console.log(result.data);}).catch(e=>{var _e$response,_e$response$data,_e$response2,_e$response2$data;dispatch(loadingflas({loading:false}));let msg=(_e$response=e.response)!==null&&_e$response!==void 0&&(_e$response$data=_e$response.data)!==null&&_e$response$data!==void 0&&_e$response$data.msg?(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.msg:\"존재하지 않는 게시물입니다.\";alert(msg);window.close();navigate(\"/\");});};const requestLike=()=>{APIS.postData(API_URL.jobOffer.like,{idx:params.get(\"idx\")}).then(result=>{var _result$data3,_result$data4;dispatch(loadingflas({loading:false}));console.log(result.data);setLikeCheck(result===null||result===void 0?void 0:(_result$data3=result.data)===null||_result$data3===void 0?void 0:_result$data3.like_check);setLike(result===null||result===void 0?void 0:(_result$data4=result.data)===null||_result$data4===void 0?void 0:_result$data4.like_cnt);}).catch(e=>{dispatch(loadingflas({loading:false}));});};const requestDelete=idx=>{APIS.postData(API_URL.jobOffer.delete,{idx}).then(result=>{dispatch(loadingflas({loading:false}));alert(\"삭제되었습니다.\");goBackPage(navigate);console.log(result.data);}).catch(e=>{dispatch(loadingflas({loading:false}));});};const requestMessage=()=>{let sendData={target_idx:offerInfo===null||offerInfo===void 0?void 0:offerInfo.u_idx,desc:message};console.log(sendData);APIS.postData(API_URL.user.sendMessage,sendData).then(result=>{dispatch(loadingflas({loading:false}));}).catch(e=>{dispatch(loadingflas({loading:false}));});};useEffect(()=>{if(isSend){setIsSend(false);requestMessage();}},[isSend]);const sendMessage=()=>{var _UserData$userInfo;console.log(\"asdasd\");if((offerInfo===null||offerInfo===void 0?void 0:offerInfo.u_idx)===((_UserData$userInfo=UserData.userInfo)===null||_UserData$userInfo===void 0?void 0:_UserData$userInfo.idx)){toast(\"본인 게시글입니다.\");return;}dispatch(open({component:/*#__PURE__*/_jsx(MessageSend,{onChange:setMessage,noneMt:true}),button:\"쪽지보내기\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());setIsSend(true);},onCancelPress:()=>{dispatch(close());}}));};useEffect(()=>{loadData();},[]);return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"jobOfferInfoContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{window.close();navigate(\"/\",{replace:true});}}),/*#__PURE__*/_jsxs(\"div\",{className:\"titleInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[\"\\uCD5C\\uCD08\\uB4F1\\uB85D \",moment(offerInfo===null||offerInfo===void 0?void 0:offerInfo.create_dt).format(\"YY-MM-DD\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"view\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/eye-line.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"count\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.view})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"likeInfo\",onClick:requestLike,children:[likeCheck?/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/heart-3-fill.svg\",alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/heart-3-line-disable.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:like})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-title-24 header-add-btn-box\",children:[\"\\uAD6C\\uC778 \\uC815\\uBCF4\",/*#__PURE__*/_jsx(\"div\",{className:\"offer-report-btn\",children:(offerInfo===null||offerInfo===void 0?void 0:offerInfo.u_idx)===((_UserData$userInfo2=UserData.userInfo)===null||_UserData$userInfo2===void 0?void 0:_UserData$userInfo2.idx)?/*#__PURE__*/_jsxs(\"div\",{class:\"drop-down\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"drop-btn\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"drop-down-content\",children:[/*#__PURE__*/_jsx(\"a\",{style:{cursor:\"pointer\"},onClick:()=>{navigate(\"/jobofferEdit?idx=\".concat(offerInfo===null||offerInfo===void 0?void 0:offerInfo.idx));},children:\"\\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"a\",{style:{cursor:\"pointer\"},onClick:()=>{dispatch(open({content:\"삭제하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());requestDelete(params.get(\"idx\"));},onCancelPress:()=>{dispatch(close());}}));},children:\"\\uC0AD\\uC81C\\uD558\\uAE30\"})]})]}):/*#__PURE__*/_jsx(Button,{titleimgs:\"/images/icons/alarm-warning-line.svg\",buttonTxt:\"\\uC2E0\\uACE0\\uD558\\uAE30\",buttonShape:\"red\",buttonSize:\"small\",onPress:()=>{navigate(\"/reportJoboffer?idx=\".concat(params.get(\"idx\")));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"offerInfoBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-offer-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"iconBox\",children:/*#__PURE__*/_jsx(\"img\",{src:consts.s3url+(offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$writer=offerInfo.writer)===null||_offerInfo$writer===void 0?void 0:_offerInfo$writer.profile),alt:\"\",onError:DefaultPfofile})}),/*#__PURE__*/_jsxs(\"div\",{className:\"detailInfoBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$writer2=offerInfo.writer)===null||_offerInfo$writer2===void 0?void 0:_offerInfo$writer2.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uCE74\\uD1A1ID\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$writer3=offerInfo.writer)===null||_offerInfo$writer3===void 0?void 0:_offerInfo$writer3.kakao_id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC5F0\\uB77D\\uCC98\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:(offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$writer4=offerInfo.writer)===null||_offerInfo$writer4===void 0?void 0:_offerInfo$writer4.hp)&&addHyphenToPhoneNumber(offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$writer5=offerInfo.writer)===null||_offerInfo$writer5===void 0?void 0:_offerInfo$writer5.hp)})]})]})]}),(offerInfo===null||offerInfo===void 0?void 0:offerInfo.u_idx)!==((_UserData$userInfo3=UserData.userInfo)===null||_UserData$userInfo3===void 0?void 0:_UserData$userInfo3.idx)&&/*#__PURE__*/_jsxs(\"div\",{className:\"job-offer-btnbox\",children:[/*#__PURE__*/_jsx(Button,{buttonTxt:\"\\uCABD\\uC9C0\\uBB38\\uC758\",buttonShape:\"white\",onPress:sendMessage}),/*#__PURE__*/_jsx(Button,{buttonTxt:\"\\uC804\\uD654\\uBB38\\uC758\",onPress:()=>{var _UserData$userInfo4,_offerInfo$writer6;if((offerInfo===null||offerInfo===void 0?void 0:offerInfo.u_idx)===((_UserData$userInfo4=UserData.userInfo)===null||_UserData$userInfo4===void 0?void 0:_UserData$userInfo4.idx)){toast(\"본인 게시글입니다.\");return;}document.location.href=\"tel:\".concat(offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$writer6=offerInfo.writer)===null||_offerInfo$writer6===void 0?void 0:_offerInfo$writer6.hp);}})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"infoBox mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"offer-info-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-24\",children:\"\\uAD6C\\uC778 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC5C5\\uCCB4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.company})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uCD9C\\uADFC\\uC9C0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[offerInfo===null||offerInfo===void 0?void 0:offerInfo.go_sido,\" \",offerInfo===null||offerInfo===void 0?void 0:offerInfo.go_sigungu]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC6B4\\uD589\\uAD6C\\uAC04\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.section})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC0C1\\uD558\\uCC28 \\uD615\\uD0DC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.unloading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uADFC\\uBB34\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.work})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD734\\uBB34\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.dayoff})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAE09\\uC5EC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[numFormat(offerInfo===null||offerInfo===void 0?void 0:offerInfo.pay),\"\\uB9CC\\uC6D0\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC811\\uC218\\uB9C8\\uAC10\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:(offerInfo===null||offerInfo===void 0?void 0:offerInfo.deadline_type)==3?offerInfo===null||offerInfo===void 0?void 0:offerInfo.deadline:(offerInfo===null||offerInfo===void 0?void 0:offerInfo.deadline_type)==1?\"채용시\":\"상시모집\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-24\",children:\"\\uC790\\uACA9 \\uC694\\uAC74\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uCC28\\uB7C9\\uD1A4\\uC218\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.ton})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC801\\uD569\\uBA74\\uD5C8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.certificate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD654\\uBB3C\\uC6B4\\uC1A1\\uC885\\uC0AC\\uC790\\uACA9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo!==null&&offerInfo!==void 0&&offerInfo.cargo_option?\"필요\":\"필요없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC704\\uD5D8\\uBB3C\\uC6B4\\uC1A1\\uC790\\uC99D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo!==null&&offerInfo!==void 0&&offerInfo.danger_option?\"필요\":\"필요없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uBCF4\\uAC74\\uC99D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo!==null&&offerInfo!==void 0&&offerInfo.health_option?\"필요\":\"필요없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAC74\\uC124\\uAE30\\uACC4\\uC870\\uC885\\uC0AC\\uBA74\\uD5C8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo!==null&&offerInfo!==void 0&&offerInfo.machinery_option?\"필요\":\"필요없음\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uADFC\\uBB34\\uD615\\uD0DC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.worktype})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC131\\uBCC4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.gender})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD559\\uB825\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.education})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uACBD\\uB825\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:offerInfo===null||offerInfo===void 0?void 0:offerInfo.career})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-24\",children:\"\\uC0C1\\uC138 \\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-text\",dangerouslySetInnerHTML:{__html:offerInfo===null||offerInfo===void 0?void 0:(_offerInfo$desc=offerInfo.desc)===null||_offerInfo$desc===void 0?void 0:_offerInfo$desc.replaceAll(\"\\n\",\"<br>\")}})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}