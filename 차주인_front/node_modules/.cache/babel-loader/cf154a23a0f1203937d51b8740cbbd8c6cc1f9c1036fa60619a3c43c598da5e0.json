{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useLocation,useNavigate,useParams}from'react-router-dom';import\"../../css/my/my-calendar-info.css\";import Layout from\"../../layout/Layout\";import Button from'../../component/Button';import*as APIS from\"../../utils/service\";import{addHyphenToPhoneNumber,goBackPage,numFormat}from'../../utils/utils';import MyNavigator from'./components/MyNavigator';import{API_URL}from'../../libs/apiUrl';import{close,loadingflas,open}from'../../redux/popupSlice';import{MessageSend}from'../../component/popups/MessageBox';import{selectUserInfo}from'../../redux/userSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyCalendarInfo(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const location=useLocation();const{userInfo}=useSelector(selectUserInfo);const params=new URLSearchParams(window.location.search);const[infoData,setInfoData]=useState({});const[tabIndex,setTabIndex]=useState(1);// 0=Î∞õÏùÄ 1=Î≥¥ÎÇ∏\nconst[message,setMessage]=useState();const[isSend,setIsSend]=useState(false);useEffect(()=>{var _location$state;console.log(location.state);if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.tabIndex){var _location$state2;setTabIndex((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.tabIndex);}if(params.get(\"idx\")){APIS.postData(API_URL.calendar.info,{idx:params.get(\"idx\")}).then(result=>{console.log(\"üöÄ ~ .then ~ result:\",result.data);setInfoData(result.data);}).catch(e=>{console.log(e);});}else goBackPage(navigate);},[]);const msgPopup=msg=>{dispatch(open({content:msg,onCancelPress:false,titleviewer:false,button:\"ÌôïÏù∏\",onPress:()=>{dispatch(close());}}));};const requestMessage=()=>{let sendData={target_idx:infoData===null||infoData===void 0?void 0:infoData.u_idx,desc:message};console.log(sendData);dispatch(loadingflas({loading:true}));APIS.postData(API_URL.user.sendMessage,sendData).then(result=>{dispatch(loadingflas({loading:false}));msgPopup(\"Ï™ΩÏßÄÎ•º Î≥¥ÎÉàÏäµÎãàÎã§.\");}).catch(e=>{dispatch(loadingflas({loading:false}));});};useEffect(()=>{if(isSend){setIsSend(false);requestMessage();}},[isSend]);const sendMessage=()=>{console.log(\"Ï™ΩÏßÄ Î≥¥ÎÇ¥Ïöî.\");dispatch(open({component:/*#__PURE__*/_jsx(MessageSend,{onChange:setMessage,noneMt:true}),button:\"Ï™ΩÏßÄÎ≥¥ÎÇ¥Í∏∞\",buttonCencle:\"Îã´Í∏∞\",onPress:()=>{dispatch(close());setIsSend(true);},onCancelPress:()=>{dispatch(close());}}));};return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"myCalendarInfoContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{navigate(\"/mypageCalendar\",{replace:true});}}),/*#__PURE__*/_jsx(\"div\",{className:\"titleInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"\\uC608\\uC57D\\uC0C1\\uB2F4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-alamContain\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",onClick:()=>{navigate(\"/message\");},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/mail-line.svg\",alt:\"\"}),(userInfo===null||userInfo===void 0?void 0:userInfo.message_count)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"num\",children:userInfo===null||userInfo===void 0?void 0:userInfo.message_count})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsx(MyNavigator,{list:[{title:\"ÎßàÏù¥\"},{title:\"ÏòàÏïΩÏÉÅÎã¥\"},{title:\"ÏÉÅÏÑ∏Î≥¥Í∏∞\",isSelect:true}]}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",children:[tabIndex==0&&/*#__PURE__*/_jsxs(\"div\",{className:\"name-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bolds\",children:infoData===null||infoData===void 0?void 0:infoData.name}),\"\\uB2D8\\uC73C\\uB85C\\uBD80\\uD130 \\uC608\\uC57D\\uC0C1\\uB2F4\\uC694\\uCCAD\\uC774 \\uB3C4\\uCC29\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:infoData===null||infoData===void 0?void 0:infoData.board_title}),/*#__PURE__*/_jsx(\"div\",{className:\"sub-info\",children:infoData===null||infoData===void 0?void 0:infoData.board_sub_data}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"r-name\",children:\"\\uC131\\uD568\"}),/*#__PURE__*/_jsx(\"div\",{className:\"r-value\",children:infoData===null||infoData===void 0?void 0:infoData.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"r-name\",children:\"\\uC5F0\\uB77D\\uCC98\"}),/*#__PURE__*/_jsx(\"div\",{className:\"r-value\",children:addHyphenToPhoneNumber(infoData===null||infoData===void 0?void 0:infoData.hp)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"r-name\",children:\"\\uC8FC\\uC18C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"r-value\",children:[infoData===null||infoData===void 0?void 0:infoData.sido,\" \",infoData===null||infoData===void 0?void 0:infoData.sigungu]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"r-name ttop\",children:\"\\uC694\\uCCAD\\uC0AC\\uD56D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"r-value\",dangerouslySetInnerHTML:{__html:String(infoData===null||infoData===void 0?void 0:infoData.desc).replaceAll(\"\\n\",\"<br>\")}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-box\",children:[/*#__PURE__*/_jsx(Button,{styles:{flex:1},buttonTxt:\"\\uCABD\\uC9C0\\uBCF4\\uB0B4\\uAE30\",buttonShape:\"white\",buttonSize:\"large\",onPress:()=>{sendMessage();}}),/*#__PURE__*/_jsx(Button,{styles:{flex:1},buttonTxt:\"\\uC804\\uD654\\uD558\\uAE30\",buttonSize:\"large\",onPress:()=>{document.location.href=\"tel:\".concat(infoData===null||infoData===void 0?void 0:infoData.hp);}})]})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}