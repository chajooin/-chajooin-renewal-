{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useLocation,useNavigate}from'react-router-dom';import{open,close,loadingflas,showLoginPopup}from'../../redux/popupSlice';import\"../../css/page-jobsearch.css\";import Layout from\"../../layout/Layout\";import Selector from\"../../component/Select\";import Button from\"../../component/Button\";import*as APIS from\"../../utils/service\";import{AutoSizer,List,WindowScroller}from'react-virtualized';import{API_URL}from'../../libs/apiUrl';import{numFormat}from'../../utils/utils';import{TextCheckBox}from'../../component/TextCheck';import{PayOption,SidoOption,TonOption}from'../../component/popups/CarOption';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function JobSearch(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const location=useLocation();const[isLogin,setLogin]=useState(localStorage.getItem(\"token\")?true:false);const[srRowHeight,setSrRowHeight]=useState(257);const[order,setOrder]=useState(1);const[myView,setMyView]=useState(false);const[searchList,setSearchList]=useState([]);const[viewList,setViewList]=useState([]);const[filterSido,seFilterSido]=useState(\"\");const[filterTon,setFilterTon]=useState(\"\");const categoryClick=index=>{if(index==0){dispatch(open({component:/*#__PURE__*/_jsx(SidoOption,{setValue:filterSido,onChange:seFilterSido}),onCancelPress:false,titleviewer:true,title:\"지역\",button:\"초기화\",buttonStyle:\"reset\",onPress:()=>{dispatch(close());seFilterSido(\"\");},noneMt:true}));}else if(index==1){dispatch(open({component:/*#__PURE__*/_jsx(TonOption,{setValue:filterTon,onChange:setFilterTon}),onCancelPress:false,titleviewer:true,title:\"차종\",button:\"초기화\",buttonStyle:\"reset\",onPress:()=>{dispatch(close());setFilterTon(\"\");},noneMt:true}));}};useEffect(()=>{filterList();},[filterSido,filterTon]);const filterList=()=>{let filterData=searchList.filter(v=>{let isSelect=true;if(filterSido&&v.go_sido!=filterSido)isSelect=false;if(filterTon&&v.ton!=filterTon)isSelect=false;return isSelect;});setViewList(filterData);};//윈도우 가로사이즈 체크\nconst checkWindowWidth=()=>{const width=window.innerWidth;if(width<800){setSrRowHeight(382);}else{setSrRowHeight(257);}};const loadList=()=>{dispatch(loadingflas({loading:true}));APIS.postData(API_URL.jobSearch.list,{order:order,my:myView}).then(result=>{console.log(\"jobSearch List:\",result.data);setSearchList(result.data);dispatch(loadingflas({loading:false}));}).catch(e=>{console.log(e);dispatch(loadingflas({loading:false}));});};useEffect(()=>{console.log(\"render jobsearch!\");if(location.state){if(location.state.isMyView)setMyView(true);}checkWindowWidth();window.onresize=function(){checkWindowWidth();};},[]);useEffect(()=>{filterList();},[searchList]);useEffect(()=>{loadList();},[order,myView]);return/*#__PURE__*/_jsx(Layout,{header:true,actives:\"jobSearch\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"jobSearchContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"categoryBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"categoryBtn \".concat(filterSido&&\"select\"),onClick:()=>categoryClick(0),children:\"\\uC9C0\\uC5ED\"}),/*#__PURE__*/_jsx(\"div\",{className:\"categoryBtn \".concat(filterTon&&\"select\"),onClick:()=>categoryClick(1),children:\"\\uCC28\\uC885\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subCategoryBox\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:10},children:[/*#__PURE__*/_jsx(Selector,{subselectClass:\"selBox\",values:order,setValues:setOrder,selectData:[{values:1,labels:\"최신순\"},{values:2,labels:\"조회순\"}]}),/*#__PURE__*/_jsx(TextCheckBox,{name:\"bmv-check\",text:\"\\uB0B4 \\uAE00 \\uBCF4\\uAE30\",isIcon:true,checked:myView,onChange:v=>{setMyView(v);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sellbtn\",children:/*#__PURE__*/_jsx(Button,{titleimgs:\"/images/icons/plus.svg\",buttonTxt:\"\\uAD6C\\uC9C1 \\uB4F1\\uB85D\",onPress:()=>{if(isLogin)navigate(\"/jobsearchAdd\");else dispatch(showLoginPopup({onPress:()=>{dispatch(close());navigate(\"/login\");}}));}})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',width:\"100%\",marginTop:20,gap:20},children:/*#__PURE__*/_jsx(WindowScroller,{children:_ref2=>{let{height,scrollTop,isScrolling,onChildScroll}=_ref2;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(AutoSizer,{disableHeight:true,children:_ref3=>{let{width}=_ref3;return/*#__PURE__*/_jsx(List,{ref:el=>{window.listEl=el;},autoHeight:true,height:height,isScrolling:isScrolling,onScroll:onChildScroll,overscanRowCount:0,rowCount:Math.ceil((viewList===null||viewList===void 0?void 0:viewList.length)/2),rowHeight:srRowHeight,rowRenderer:_ref4=>{let{index,isScrolling,isVisible,key,style}=_ref4;let startIndex=index*2;const row1=viewList[startIndex];const row2=startIndex+1<=(viewList===null||viewList===void 0?void 0:viewList.length)-1?viewList[startIndex+1]:null;// positio top width height left\nreturn/*#__PURE__*/_jsx(\"div\",{style:style,children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-list-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card \".concat((row1===null||row1===void 0?void 0:row1.status)==2&&\"disable\"),onClick:()=>{if(isLogin)window.open(\"/jobsearchInfo?idx=\"+(row1===null||row1===void 0?void 0:row1.idx));else dispatch(showLoginPopup({onPress:()=>{dispatch(close());navigate(\"/login\");}}));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[row1===null||row1===void 0?void 0:row1.ton,\"\\uD1A4\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"sub-title\",children:row1===null||row1===void 0?void 0:row1.title}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\uD76C\\uB9DD\\uC9C0\\uC5ED\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[row1===null||row1===void 0?void 0:row1.go_sido,\" \",row1===null||row1===void 0?void 0:row1.go_sigungu]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\uD76C\\uB9DD\\uD488\\uBAA9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:row1===null||row1===void 0?void 0:row1.item})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\uB4F1\\uB85D\\uC77C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:moment(row1===null||row1===void 0?void 0:row1.create_dt).format(\"YYYY.MM.DD\")})]})]}),(row1===null||row1===void 0?void 0:row1.status)==2&&/*#__PURE__*/_jsx(\"div\",{className:\"state disable\",children:\"\\uC644\\uB8CC\\uB428\"})]}),row2&&/*#__PURE__*/_jsxs(\"div\",{className:\"card \".concat((row2===null||row2===void 0?void 0:row2.status)==2&&\"disable\"),onClick:()=>{if(isLogin)window.open(\"/jobsearchInfo?idx=\"+(row2===null||row2===void 0?void 0:row2.idx));else dispatch(showLoginPopup({onPress:()=>{dispatch(close());navigate(\"/login\");}}));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[row2===null||row2===void 0?void 0:row2.ton,\"\\uD1A4\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"sub-title\",children:row2===null||row2===void 0?void 0:row2.title}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\uD76C\\uB9DD\\uC9C0\\uC5ED\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[row2===null||row2===void 0?void 0:row2.go_sido,\" \",row2===null||row2===void 0?void 0:row2.go_sigungu]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\uD76C\\uB9DD\\uD488\\uBAA9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:row2===null||row2===void 0?void 0:row2.item})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:\"\\uB4F1\\uB85D\\uC77C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:moment(row2===null||row2===void 0?void 0:row2.create_dt).format(\"YYYY.MM.DD\")})]})]}),(row2===null||row2===void 0?void 0:row2.status)==2&&/*#__PURE__*/_jsx(\"div\",{className:\"state disable\",children:\"\\uC644\\uB8CC\\uB428\"})]})]})},key);},scrollToIndex:0,scrollTop:scrollTop,width:width});}})});}})})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}