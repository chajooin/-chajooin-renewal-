{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import\"../../css/my/my-cs.css\";import Layout from\"../../layout/Layout\";import Button from'../../component/Button';import*as APIS from\"../../utils/service\";import{goBackPage,numFormat}from'../../utils/utils';import MyNavigator from'./components/MyNavigator';import ArcodianMenu from'./components/MyArcodionMenu';import{API_URL}from'../../libs/apiUrl';import{close,loadingflas,open}from'../../redux/popupSlice';import{selectConfig}from'../../redux/configSlice';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyCS(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const ConfigData=useSelector(selectConfig);const[csList,setCsList]=useState([]);const[desc,setdesc]=useState([]);const commentState=function(state){let text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";return/*#__PURE__*/_jsx(\"div\",{className:\"comment-state \".concat(state&&\"success\"),children:text?text:state?\"답변완료\":\"미답변\"});};const commentBox=(text,date)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"cs-comment\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 20 20\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"g\",{id:\"corner-down-right-line\",children:/*#__PURE__*/_jsx(\"path\",{id:\"Vector\",d:\"M4.16613 11.6659L4.16602 4.16604L5.83268 4.16602L5.83277 9.99927L14.3093 9.99935L11.0178 6.70791L12.1963 5.5294L17.4997 10.8327L12.1963 16.136L11.0178 14.9575L14.3093 11.666L4.16613 11.6659Z\",fill:\"#999999\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-box\",children:[commentState(true,\"답변\"),/*#__PURE__*/_jsx(\"div\",{className:\"text\",dangerouslySetInnerHTML:{__html:text}}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:date})]})]});};const sendCS=()=>{dispatch(open({content:\"문의하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());dispatch(loadingflas({loading:true}));APIS.postData(API_URL.cs.insert,{desc:desc}).then(result=>{console.log(result.data);setdesc(\"\");dispatch(loadingflas({loading:false}));loadInfo();}).catch(e=>{console.log(e);dispatch(loadingflas({loading:false}));});},onCancelPress:()=>{dispatch(close());}}));};const loadInfo=()=>{dispatch(loadingflas({loading:true}));APIS.postData(API_URL.cs.list).then(result=>{console.log(result.data);setCsList(result.data);dispatch(loadingflas({loading:false}));}).catch(e=>{console.log(e);setCsList([]);dispatch(loadingflas({loading:false}));});};useEffect(()=>{loadInfo();},[]);return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"myCSContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{navigate(\"/mypage\",{replace:true});}}),/*#__PURE__*/_jsx(\"div\",{className:\"titleInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"\\uBB38\\uC758\\uD558\\uAE30\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsx(MyNavigator,{list:[{title:\"마이\"},{title:\"문의하기\",isSelect:true}]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-contain\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"help\",children:\"\\uBD88\\uD3B8\\uD558\\uC2E0 \\uC810\\uC774\\uB098 \\uAC74\\uC758\\uC0AC\\uD56D\\uC774 \\uC788\\uC73C\\uC2DC\\uBA74 \\uBB38\\uC758\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"text-box\",placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",value:desc,onChange:e=>{setdesc(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-box\",children:/*#__PURE__*/_jsx(Button,{styles:{width:120},buttonTxt:\"\\uBCF4\\uB0B4\\uAE30\",onPress:sendCS})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-contain\",children:csList.map(v=>{var _v$desc;return/*#__PURE__*/_jsxs(ArcodianMenu,{beforeComponet:commentState(v!==null&&v!==void 0&&v.answer?true:false),title:v===null||v===void 0?void 0:(_v$desc=v.desc)===null||_v$desc===void 0?void 0:_v$desc.slice(0,100),subStr:moment(v===null||v===void 0?void 0:v.create_dt).format(\"YYYY.MM.DD\"),children:[/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:v===null||v===void 0?void 0:v.desc.replaceAll(\"\\n\",\"<br>\")}}),(v===null||v===void 0?void 0:v.answer)&&commentBox(v===null||v===void 0?void 0:v.answer.replaceAll(\"\\n\",\"<br>\"),moment(v===null||v===void 0?void 0:v.answer_dt).format(\"YYYY.MM.DD HH:mm\"))]});})})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}