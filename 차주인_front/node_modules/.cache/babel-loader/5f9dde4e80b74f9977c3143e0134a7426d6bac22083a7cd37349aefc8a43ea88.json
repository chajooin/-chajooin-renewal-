{"ast":null,"code":"import React,{useEffect,useState,useRef,useId}from'react';import{useDispatch,useSelector}from'react-redux';import{clickImg,regFileDoc,regFileImage,regFilePdf,regFileExcel}from'../utils/utils';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function InputFile(props){const dispatch=useDispatch();const{className,placeholder,subPlaceholder,type,name,maxlength,value,idx,setValue,setExt,setFileName,defaultFileName,onChange,fileNameView=true,valid,label,labelLeft,labelType='image',error,setError,success,readOnly,onBlur,withButton,withButtonPress,style,down=false,fileDeleteButton=false,onDelete,imgStyle,buttonStyle={},backGray=false,disabled=false}=props;const fileInput=useRef();const[cker,setCker]=useState(false);const[file_name,setfile_name]=useState(\"\");const id=useId();useEffect(()=>{setfile_name(defaultFileName);},[defaultFileName]);const handleChange=_ref=>{let{file}=_ref;// if (setError) setError('');\nvar reg=\"\";var msg=\"\";if(valid==='image'){reg=regFileImage;msg=\"이미지\";}else if(valid==='doc'){reg=regFileDoc;msg=\"문서\";}else if(valid==='pdf'){reg=regFilePdf;msg=\"문서\";}else if(valid==='excel'){reg=regFileExcel;msg=\"문서\";}if(file.name.toLowerCase().match(reg)){// console.log(file);\nsetfile_name(file.name);if(setFileName)setFileName(file.name);let reader=new FileReader();reader.onload=function(){let fn=file.name.split('.');if(onChange){onChange(idx,name,{base:reader.result,ext:fn[fn.length-1]});}else{setValue({base:reader.result,ext:fn[fn.length-1]});setCker(true);if(setExt){setExt(fn[fn.length-1]);}}};reader.readAsDataURL(file);}else{fileInput.current.value=\"\";setError(\"파일 형식이 올바르지않습니다.\");setCker(false);if(!onChange){setValue(\"\");setfile_name(\"\");if(setFileName)setFileName(\"\");if(setExt)setExt(\"\");}}};// set file reader function\nconst fileDelete=e=>{e.stopPropagation();if(!readOnly){fileInput.current.value=\"\";setCker(false);if(onChange){onChange(idx,name,'');}else{setValue(\"\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"input_box\",style:style,children:[label&&/*#__PURE__*/_jsx(\"p\",{className:\"input_label\",children:label}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_file_section \".concat(backGray&&\"back_gray\"),children:[labelType==='image'?/*#__PURE__*/_jsx(\"label\",{className:\"input_file_label\",style:imgStyle,htmlFor:!readOnly?id:\"\",children:value!==null&&value!==void 0&&value.base?/*#__PURE__*/_jsx(\"img\",{className:'input_preview_img',src:value===null||value===void 0?void 0:value.base,alt:\"img\"}):value?/*#__PURE__*/_jsx(\"img\",{className:'input_preview_img',src:value,alt:\"img\"}):labelType==='text'?/*#__PURE__*/_jsx(\"p\",{children:\"\\uD30C\\uC77C\\uC120\\uD0DD\"}):/*#__PURE__*/_jsx(_Fragment,{children:placeholder?/*#__PURE__*/_jsxs(\"p\",{className:\"inpu_file_placeholder\",children:[placeholder,subPlaceholder&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),subPlaceholder]})]}):{label}})}):/*#__PURE__*/_jsxs(\"div\",{className:\"input_file_label_doc\",children:[!readOnly&&/*#__PURE__*/_jsx(\"label\",{className:\"file_label_btn\",htmlFor:id,children:\"\\uD30C\\uC77C\\uCC3E\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_file_label_doc_names\",style:buttonStyle,children:value!==null&&value!==void 0&&value.base?/*#__PURE__*/_jsx(\"p\",{onClick:()=>valid==='image'?clickImg(value===null||value===void 0?void 0:value.base):{},children:file_name}):value?/*#__PURE__*/_jsx(\"p\",{onClick:()=>valid==='image'?clickImg(\"/\"+value):{},children:value}):/*#__PURE__*/_jsx(\"p\",{children:\"\\uD30C\\uC77C\\uC5C6\\uC74C\"})})]}),value&&/*#__PURE__*/_jsx(\"button\",{className:\"input_delete_button\",onClick:fileDelete,children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/x-icon.svg\"})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInput,type:type,name:name,id:id,onChange:_ref2=>{let{target:{files}}=_ref2;if(files.length){handleChange({file:files[0]});}},disabled:disabled})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"input_error animate__animated animate__headShake\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"input_success\",children:success})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}