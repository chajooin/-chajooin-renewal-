{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import Layout from\"../../layout/Layout\";import Checkbox from'../../component/Checkbox';import Button from'../../component/Button';import InputFileMulti from'../../component/InputFileMulti';import*as APIS from\"../../utils/service\";import{API_URL}from'../../libs/apiUrl';import{close,open}from'../../redux/popupSlice';import{toast}from'react-toastify';import{goBackPage}from'../../utils/utils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Report(_ref){let{type,navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const params=new URLSearchParams(window.location.search);const[idx,setIdx]=useState(\"\");const[option,setOptin]=useState([]);const[desc,setDesc]=useState(\"\");const[fileVal,setFileVal]=useState([]);const msgPopup=msg=>{dispatch(open({content:msg,onCancelPress:false,titleviewer:false,button:\"확인\",onPress:()=>{dispatch(close());}}));};const sendReport=()=>{if(option.length<=0){msgPopup(\"신고사유를 선택해주세요.\");return;}if(desc.length<=0){msgPopup(\"신고내용을 작성해주세요.\");return;}let sendData={idx:idx,title:option.map(v=>v.names),desc:desc,files:fileVal};dispatch(open({content:\"신고하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());requestReport(type,sendData);},onCancelPress:()=>{dispatch(close());}}));};const requestReport=(type,sendData)=>{// jeeip/truck\nif(type===\"truck\"){APIS.postData(API_URL.usedCar.report,sendData).then(result=>{toast(\"신고되었습니다.\");}).catch(()=>{msgPopup(\"잠시 후 다시시도해 주세요.\");});}else if(type===\"jeeip\"){APIS.postData(API_URL.rentedCar.report,sendData).then(result=>{toast(\"신고되었습니다.\");}).catch(()=>{msgPopup(\"잠시 후 다시시도해 주세요.\");});}else if(type===\"joboffer\"){APIS.postData(API_URL.jobOffer.report,sendData).then(result=>{toast(\"신고되었습니다.\");}).catch(()=>{msgPopup(\"잠시 후 다시시도해 주세요.\");});}else if(type===\"jobsearch\"){APIS.postData(API_URL.jobSearch.report,sendData).then(result=>{toast(\"신고되었습니다.\");}).catch(()=>{msgPopup(\"잠시 후 다시시도해 주세요.\");});}};useEffect(()=>{if(!params.get(\"idx\"))goBackPage(navigate);else setIdx(params.get(\"idx\"));},[]);return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"report-contain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{goBackPage(navigate);}}),/*#__PURE__*/_jsx(\"div\",{className:\"titleInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"\\uC2E0\\uACE0\\uD558\\uAE30\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-contents-box bg_white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-title-32\",children:\"\\uC2E0\\uACE0\\uD558\\uAE30\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\"\\uC2E0\\uACE0\\uC0AC\\uC720\",/*#__PURE__*/_jsx(\"span\",{className:\"sub-title\",children:\"(\\uC911\\uBCF5 \\uC120\\uD0DD \\uAC00\\uB2A5)\"}),/*#__PURE__*/_jsx(\"span\",{className:\"red\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-box\",children:/*#__PURE__*/_jsx(Checkbox,{linetype:'checkimg',values:option,setvalues:setOptin,namevalue:[{names:'광고/홍보/허위 게시물',values:0},{names:'알선업체 및 중간업자',values:1},{names:'일방적인 노쇼',values:2},{names:'불쾌감을 주는 언행(욕설,음란,비방 등)',values:3},{names:'기타 사유',values:4}],flexrows:\"column\",fontweights:400,fontSizes:16,sizes:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\"\\uC2E0\\uACE0\\uB0B4\\uC6A9\",/*#__PURE__*/_jsxs(\"span\",{className:\"sub-title\",children:[\"(\\uC0C1\\uC138\\uD558\\uAC8C \\uC791\\uC131\\uD574 \\uC8FC\\uC138\\uC694.)\",/*#__PURE__*/_jsx(\"span\",{className:\"red\",children:\"*\"})]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"text-box\",value:desc,onChange:e=>{setDesc(e.target.value);},placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAD00\\uB828 \\uC774\\uBBF8\\uC9C0\"}),/*#__PURE__*/_jsx(InputFileMulti,{type:\"file\",multiple:true,placeholder:\"\\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",name:\"ipf3\"// label=\"*상세사진 (10개까지 등록 가능)\"\n,value:fileVal,setValue:setFileVal,valid:\"image\"})]}),/*#__PURE__*/_jsx(Button,{buttonTxt:\"\\uC2E0\\uACE0\\uD558\\uAE30\",buttonSize:\"large\",onPress:()=>{sendReport();}})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}