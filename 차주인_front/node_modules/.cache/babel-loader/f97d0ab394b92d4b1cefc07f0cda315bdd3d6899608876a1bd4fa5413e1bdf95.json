{"ast":null,"code":"import React,{useEffect,useState,useRef,useId}from'react';import{useDispatch,useSelector}from'react-redux';import{clickImg,regFileDoc,regFileImage,regFilePdf,regFileExcel}from'../utils/utils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function InputFileBox(props){const dispatch=useDispatch();const{type,style,name,idx,setValue,setExt,setFileName,defaultFileName,onChange,valid,readOnly,children,setError}=props;const fileInput=useRef();const[file_name,setfile_name]=useState(\"\");const id=useId();useEffect(()=>{setfile_name(defaultFileName);},[defaultFileName]);const handleChange=_ref=>{let{file}=_ref;var reg=\"\";var msg=\"\";if(valid==='image'){reg=regFileImage;msg=\"이미지\";}else if(valid==='doc'){reg=regFileDoc;msg=\"문서\";}else if(valid==='pdf'){reg=regFilePdf;msg=\"문서\";}else if(valid==='excel'){reg=regFileExcel;msg=\"문서\";}if(file.name.toLowerCase().match(reg)){// console.log(file);\nsetfile_name(file.name);if(setFileName)setFileName(file.name);let reader=new FileReader();reader.onload=function(){let fn=file.name.split('.');if(onChange){onChange(idx,name,{base:reader.result,ext:fn[fn.length-1]});}else{setValue({base:reader.result,ext:fn[fn.length-1]});if(setExt){setExt(fn[fn.length-1]);}}};reader.readAsDataURL(file);}else{fileInput.current.value=\"\";if(!onChange){setValue(\"\");setfile_name(\"\");if(setFileName)setFileName(\"\");if(setExt)setExt(\"\");}if(setError)setError(\"파일 형식이 맞지않습니다.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"input_box\",style:style,children:[/*#__PURE__*/_jsx(\"label\",{className:\"file_label_btn\",htmlFor:id,children:children}),/*#__PURE__*/_jsx(\"input\",{ref:fileInput,type:type,name:name,id:id,onChange:_ref2=>{let{target:{files}}=_ref2;if(files.length){handleChange({file:files[0]});}}})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}