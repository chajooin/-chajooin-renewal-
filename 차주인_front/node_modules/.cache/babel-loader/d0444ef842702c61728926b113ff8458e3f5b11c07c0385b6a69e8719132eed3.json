{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import\"../../css/my/my-noti.css\";import Layout from\"../../layout/Layout\";import Button from'../../component/Button';import*as APIS from\"../../utils/service\";import{goBackPage,numFormat}from'../../utils/utils';import MyNavigator from'./components/MyNavigator';import{selectUserInfo}from'../../redux/userSlice';import{AutoSizer,CellMeasurer,CellMeasurerCache,List,WindowScroller}from'react-virtualized';import{API_URL}from'../../libs/apiUrl';import{loadingflas}from'../../redux/popupSlice';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const checkToken=()=>{let token=localStorage.getItem(\"token\");return token?true:false;};export default function MyNoti(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const{userInfo}=useSelector(selectUserInfo);const[notiInfo,setNotiInfo]=useState([]);const listRef=useRef(null);const cache=new CellMeasurerCache({defaultWidth:100,fixedWidth:true});useEffect(()=>{dispatch(loadingflas({loading:true}));APIS.postData(API_URL.noti.list).then(result=>{dispatch(loadingflas({loading:false}));setNotiInfo(result.data);}).catch(e=>{dispatch(loadingflas({loading:false}));console.log(e);});},[]);return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"myNotiContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{navigate(\"/mypage\",{replace:true});}}),/*#__PURE__*/_jsx(\"div\",{className:\"titleInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\"})}),checkToken()&&/*#__PURE__*/_jsx(\"div\",{className:\"quick-alamContain\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",onClick:()=>{navigate(\"/message\");},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/mail-line.svg\",alt:\"\"}),(userInfo===null||userInfo===void 0?void 0:userInfo.message_count)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"num\",children:userInfo===null||userInfo===void 0?void 0:userInfo.message_count})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsx(MyNavigator,{list:[{title:\"마이\"},{title:\"공지사항\",isSelect:true}]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"list-box\",children:/*#__PURE__*/_jsx(WindowScroller,{children:_ref2=>{let{height,scrollTop,isScrolling,onChildScroll}=_ref2;return/*#__PURE__*/_jsx(AutoSizer,{disableHeight:true,children:_ref3=>{let{width}=_ref3;return/*#__PURE__*/_jsx(List,{ref:listRef,autoHeight:true,height:height,width:width,isScrolling:isScrolling,overscanRowCount:0,onScroll:onChildScroll,scrollTop:scrollTop,rowCount:notiInfo.length,rowHeight:cache.rowHeight,rowRenderer:_ref4=>{let{index,key,parent,style}=_ref4;let row=notiInfo[index];return/*#__PURE__*/_jsx(CellMeasurer,{cache:cache,parent:parent,columnIndex:0,rowIndex:index,children:/*#__PURE__*/_jsx(\"div\",{style:style,children:/*#__PURE__*/_jsxs(\"div\",{className:\"list-item\",onClick:()=>{navigate(\"/mypageNotiInfo?idx=\".concat(row===null||row===void 0?void 0:row.idx));},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:row===null||row===void 0?void 0:row.title}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:moment(row===null||row===void 0?void 0:row.create_dt).format(\"YYYY.MM.DD HH.mm\")})]})})},key);},deferredMeasurementCache:cache});}});}})})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}