{"ast":null,"code":"const appKey = \"86ef144fdf6e2dbd935bae085a89c560\";\nconst redirectURL = \"http://127.0.0.1:3000/login\";\nexport const openKakao = () => {\n  let url = `https://kauth.kakao.com/oauth/authorize?client_id=${appKey}&redirect_uri=${redirectURL}&response_type=code`;\n  window.location.href = url;\n};\nexport async function getKakaoInfo(code) {\n  console.log(\"code ::::\", code);\n  if (code == null || code == undefined) {\n    return new Error(\"not found code!\");\n  }\n  const myHeaders = new Headers();\n  myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n  const urlencoded = new URLSearchParams();\n  urlencoded.append(\"grant_type\", \"authorization_code\");\n  urlencoded.append(\"client_id\", appKey);\n  urlencoded.append(\"redirect_uri\", redirectURL);\n  urlencoded.append(\"code\", code);\n  const requestOptions = {\n    method: \"POST\",\n    headers: myHeaders,\n    body: urlencoded,\n    redirect: \"follow\"\n  };\n  return new Promise((resolve, reject) => {\n    fetch(\"https://kauth.kakao.com/oauth/token\", requestOptions).then(response => response.text()).then(result => {\n      let tokenInfo = JSON.parse(result);\n      console.log(\"카카오 토큰:\", tokenInfo);\n      getUserInfo({\n        accessToken: tokenInfo.access_token\n      }).then(data => {\n        resolve(data);\n      }).catch(e => {\n        reject(e);\n      });\n    }).catch(error => reject(error));\n  });\n}\nexport const getUserInfo = data => {\n  let {\n    accessToken = \"\"\n  } = data;\n  const myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", `Bearer ${accessToken}`);\n  const requestOptions = {\n    method: \"POST\",\n    headers: myHeaders,\n    redirect: \"follow\"\n  };\n  return new Promise((resolve, reject) => {\n    fetch(\"https://kapi.kakao.com/v2/user/me\", requestOptions).then(response => response.text()).then(result => resolve(JSON.parse(result))).catch(error => reject(error));\n  });\n};","map":{"version":3,"names":["appKey","redirectURL","openKakao","url","window","location","href","getKakaoInfo","code","console","log","undefined","Error","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","body","redirect","Promise","resolve","reject","fetch","then","response","text","result","tokenInfo","JSON","parse","getUserInfo","accessToken","access_token","data","catch","e","error"],"sources":["C:/Users/USER/Desktop/사업관련서류/pn개발이력/차주인_20250609/차주인_front/src/utils/kakaoLogin.js"],"sourcesContent":["const appKey = \"86ef144fdf6e2dbd935bae085a89c560\";\nconst redirectURL = \"http://127.0.0.1:3000/login\";\n\nexport const openKakao = () => {\n    let url = `https://kauth.kakao.com/oauth/authorize?client_id=${appKey}&redirect_uri=${redirectURL}&response_type=code`\n    window.location.href = url;\n}\n\nexport async function getKakaoInfo(code) {\n    console.log(\"code ::::\", code);\n    if (code == null || code == undefined) {\n        return new Error(\"not found code!\");\n    }\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n    const urlencoded = new URLSearchParams();\n    urlencoded.append(\"grant_type\", \"authorization_code\");\n    urlencoded.append(\"client_id\", appKey);\n    urlencoded.append(\"redirect_uri\", redirectURL);\n    urlencoded.append(\"code\", code);\n\n    const requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: \"follow\"\n    };\n\n    return new Promise((resolve, reject) => {\n        fetch(\"https://kauth.kakao.com/oauth/token\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => {\n                let tokenInfo = JSON.parse(result)\n                console.log(\"카카오 토큰:\", tokenInfo)\n                getUserInfo({ accessToken: tokenInfo.access_token })\n                    .then((data) => { resolve(data) })\n                    .catch((e) => { reject(e) })\n            })\n            .catch((error) => reject(error));\n    })\n}\n\nexport const getUserInfo = (data) => {\n    let { accessToken = \"\" } = data\n    const myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", `Bearer ${accessToken}`);\n\n    const requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        redirect: \"follow\"\n    };\n\n    return new Promise((resolve, reject) => {\n        fetch(\"https://kapi.kakao.com/v2/user/me\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => resolve(JSON.parse(result)))\n            .catch((error) => reject(error));\n    })\n\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}