{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import\"../../css/page-my.css\";import consts from\"../../libs/consts\";import Layout from\"../../layout/Layout\";import Button from'../../component/Button';import*as APIS from\"../../utils/service\";import{numFormat}from'../../utils/utils';import{close,loadingflas,open}from'../../redux/popupSlice';import{API_URL}from'../../libs/apiUrl';import{loadUserInfo,setUserBoard,setUserInfo}from'../../redux/userSlice';import InputFile from'../../component/InputFile';import InputFileBox from'../../component/InputFileBox';// const test = { \"base\": \"\", \"ext\": \"png\" }\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyPage(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const params=useParams();const{userInfo,boardCount}=useSelector(s=>s.userReducer);const[proFile,setProFile]=useState('');const delProfile=()=>{dispatch(open({content:\"프로필 사진을 삭제하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{APIS.postData(API_URL.user.delProfile).then(result=>{dispatch(close());if(result.data)dispatch(loadUserInfo());}).catch(e=>console.log(\"프로필 삭제 실패\"));},onCancelPress:()=>{dispatch(close());}}));};useEffect(()=>{APIS.postData(API_URL.user.boardCount).then(result=>{console.log(\"asdasasdfasd::\",result);dispatch(setUserBoard({truck_count:result.data.truck_count,jeeip_count:result.data.jeeip_count,recruit_count:result.data.recruit_count,job_count:result.data.job_count,consulting_count:result.data.consulting_count}));}).catch(result=>{console.log(result);});},[]);useEffect(()=>{console.log(\"🚀 ~ MyPage ~ boardCount:\",boardCount);},[boardCount]);useEffect(()=>{if(proFile){//프로필 사진 등록시 바로 변경\ndispatch(loadingflas({loading:true}));APIS.postData(API_URL.user.editProfile,{files:proFile}).then(result=>{// true 로 올거임?\nif(result.data)dispatch(loadUserInfo());else console.log(\"프로필 등록 실패\");dispatch(loadingflas({loading:false}));}).catch(e=>{dispatch(loadingflas({loading:false}));console.log(\"프로필 등록 실패\");});}},[proFile]);// const test = { \"base\": \"\", \"ext\": \"png\" }\nreturn/*#__PURE__*/_jsx(Layout,{header:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"pageMyContain\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quick-menu-title-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-img\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile\",src:userInfo!==null&&userInfo!==void 0&&userInfo.profile?consts.s3url+userInfo.profile:\"/images/icons/default-avatar.png\",alt:\"\"}),userInfo!==null&&userInfo!==void 0&&userInfo.profile?/*#__PURE__*/_jsx(\"img\",{className:\"edit-poto\",src:\"/images/icons/delete-bin-line.svg\",alt:\"\",onClick:()=>{delProfile();}}):/*#__PURE__*/_jsx(InputFileBox,{type:\"file\",labelType:\"box\",value:proFile,setValue:setProFile,valid:\"image\",setError:msg=>{console.log(msg);},children:/*#__PURE__*/_jsx(\"img\",{className:\"edit-poto\",src:\"/images/icons/camera.svg\",alt:\"\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:userInfo===null||userInfo===void 0?void 0:userInfo.name}),/*#__PURE__*/_jsx(\"div\",{className:\"user-id \".concat(userInfo===null||userInfo===void 0?void 0:userInfo.type),children:userInfo===null||userInfo===void 0?void 0:userInfo.email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-box\",children:/*#__PURE__*/_jsx(Button,{titleimgs:\"/images/icons/edit-info.svg\",buttonTxt:\"\\uC815\\uBCF4\\uC218\\uC815\",buttonShape:\"blue\",buttonSize:\"small\",onPress:()=>{navigate('/mypageInfo');}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"view-box1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>{navigate(\"/mypagePoint\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title point\",children:\"\\uD3EC\\uC778\\uD2B8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:numFormat(userInfo===null||userInfo===void 0?void 0:userInfo.point,true)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>{navigate(\"/mypageCalendar\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title calendar\",children:\"\\uC608\\uC57D\\uC0C1\\uB2F4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:numFormat(boardCount===null||boardCount===void 0?void 0:boardCount.consulting_count)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"view-box2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>{navigate(\"/usedCar\",{state:{isMyView:true}});},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:boardCount.truck_count}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:\"\\uB4F1\\uB85D\\uD55C \\uD654\\uBB3C\\uCC28\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>{navigate(\"/rentedCar\",{state:{isMyView:true}});},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:boardCount.jeeip_count}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:\"\\uB4F1\\uB85D\\uD55C \\uC9C0\\uC785\\uCC28\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",onClick:()=>{navigate(\"/joboffer\",{state:{isMyView:true}});},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:boardCount.recruit_count+boardCount.job_count}),/*#__PURE__*/_jsx(\"div\",{className:\"value\",children:\"\\uB4F1\\uB85D\\uD55C \\uAD6C\\uC778/\\uAD6C\\uC9C1\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",onClick:()=>{navigate(\"/mypageNoti\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/array-right.svg\",alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",onClick:()=>{navigate(\"/mypageFaq\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC790\\uC8FC\\uD558\\uB294 \\uC9C8\\uBB38\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/array-right.svg\",alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",onClick:()=>{navigate(\"/mypageCs\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uBB38\\uC758\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/array-right.svg\",alt:\"\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",onClick:()=>{navigate(\"/mypagePolicy?idx=1\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC774\\uC6A9\\uC57D\\uAD00\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/array-right.svg\",alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",onClick:()=>{navigate(\"/mypagePolicy?idx=2\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAC1C\\uC778\\uC815\\uBCF4 \\uCC98\\uB9AC\\uBC29\\uCE68\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/array-right.svg\",alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",onClick:()=>{navigate(\"/mypageWithdrawal\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uD0C8\\uD1F4\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/array-right.svg\",alt:\"\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"logout-btn\",onClick:()=>{dispatch(open({content:\"로그아웃 하시겠습니까?\",onCancelPress:false,titleviewer:false,button:\"확인\",buttonCencle:\"닫기\",onPress:()=>{dispatch(close());localStorage.setItem(\"token\",\"\");navigate(\"/\");},onCancelPress:()=>{dispatch(close());}}));},children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}