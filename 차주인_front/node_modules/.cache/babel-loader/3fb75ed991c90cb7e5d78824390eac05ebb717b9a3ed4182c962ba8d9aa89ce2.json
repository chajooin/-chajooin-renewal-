{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate}from'react-router-dom';import\"../../css/page-board.css\";import consts from\"../../libs/consts\";import Layout from\"../../layout/Layout\";import Button from\"../../component/Button\";import{TextCheckBox}from\"../../component/TextCheck\";import*as APIS from\"../../utils/service\";import{API_URL}from'../../libs/apiUrl';import{AutoSizer,List,WindowScroller}from'react-virtualized';import{close,loadingflas,showLoginPopup}from'../../redux/popupSlice';import{DefaultImg,DefaultPfofile}from'../../component/DefaultImg';import moment from'moment';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const IconText=props=>{let{imageSrc=\"\",imageProfile=\"\",text=\"\",textSize=14,textColor=\"\",imageSize=20,isBold=false}=props;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:\"4px\",alignItems:\"center\"},children:[imageSrc?/*#__PURE__*/_jsx(\"img\",{style:{width:imageSize,height:imageSize},src:imageSrc}):/*#__PURE__*/_jsx(_Fragment,{}),imageProfile&&/*#__PURE__*/_jsx(\"img\",{style:{width:imageSize,height:imageSize,borderRadius:\"50%\",border:\"1px solid #EEE\"},src:imageProfile,onError:DefaultPfofile}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:textSize,fontColor:textColor,fontWeight:isBold?700:400},children:text})]});};export default function Board(_ref){let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const[isLogin,setLogin]=useState(localStorage.getItem(\"token\")?true:false);const[boardList,setBoardList]=useState([]);const[newsList,setNewsList]=useState([]);const[order,setOrder]=useState(1);const[isMyView,setIsMyView]=useState(false);const loadData=()=>{dispatch(loadingflas({loading:true}));APIS.postData(API_URL.board.list,{order:order,my:isMyView}).then(result=>{// console.log(result.data);\nsetBoardList(result.data);dispatch(loadingflas({loading:false}));}).catch(e=>{console.log(e);dispatch(loadingflas({loading:false}));});};const loadNewsList=()=>{APIS.postData(API_URL.board.newList,{}).then(result=>{let list=result.data;setNewsList(result.data);});};useEffect(()=>{// console.log(\"render!\")\nloadNewsList();},[]);useEffect(()=>{loadData();},[order,isMyView]);return/*#__PURE__*/_jsx(Layout,{header:true,actives:\"board\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"boardContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-menu-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-category-box\",children:[/*#__PURE__*/_jsx(TextCheckBox,{name:\"bnv-check\",text:\"\\uCD5C\\uADFC\\uC21C\",checked:order==1,onChange:v=>{setOrder(1);}}),/*#__PURE__*/_jsx(\"img\",{className:\"line\",src:\"/images/icons/devide.svg\",alt:\"\"}),/*#__PURE__*/_jsx(TextCheckBox,{name:\"bfv-check\",text:\"\\uC778\\uAE30\\uC21C\",checked:order==2,onChange:v=>{setOrder(2);}}),/*#__PURE__*/_jsx(TextCheckBox,{name:\"bmv-check\",text:\"\\uB0B4 \\uAE00 \\uBCF4\\uAE30\",isIcon:true,checked:isMyView,onChange:v=>{setIsMyView(v);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"top-btn-box\",children:/*#__PURE__*/_jsx(Button,{titleimgs:\"/images/icons/plus.svg\",buttonTxt:\"\\uAE00 \\uB4F1\\uB85D\\uD558\\uAE30\",onPress:()=>{if(isLogin)navigate(\"/boardAdd\");else dispatch(showLoginPopup({onPress:()=>{dispatch(close());navigate(\"/login\");}}));}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-box\",children:[newsList.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"news-list-title\",children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\"}),newsList.map((v,i)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"news-list-item\",onClick:()=>{navigate(\"/mypageNotiInfo?idx=\".concat(v===null||v===void 0?void 0:v.idx));},children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:v===null||v===void 0?void 0:v.title}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:moment(v===null||v===void 0?void 0:v.create_dt).format(\"YYYY.MM.DD HH.mm\")})]},\"news-item-\".concat(i));})]}),newsList.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"news-list-title margint32\",children:\"\\uAC8C\\uC2DC\\uAE00\"}),/*#__PURE__*/_jsx(WindowScroller,{ref:wScroller=>{if(wScroller)wScroller.updatePosition();},children:_ref2=>{let{height,scrollTop,isScrolling,onChildScroll}=_ref2;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(AutoSizer,{disableHeight:true,children:_ref3=>{let{width}=_ref3;return/*#__PURE__*/_jsx(List,{ref:el=>{window.listEl=el;},autoHeight:true,height:height,isScrolling:isScrolling,onScroll:onChildScroll,overscanRowCount:3,rowCount:boardList.length,rowHeight:170,rowRenderer:_ref4=>{var _row$desc,_row$user,_row$user2,_row$files;let{index,isScrolling,isVisible,key,style}=_ref4;const row=boardList[index];// positio top width height left\nreturn/*#__PURE__*/_jsx(\"div\",{style:style,children:/*#__PURE__*/_jsxs(\"div\",{className:\"list-item\",onClick:()=>{window.open(\"/boardInfo?idx=\".concat(row===null||row===void 0?void 0:row.idx));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:row===null||row===void 0?void 0:row.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:row!==null&&row!==void 0&&row.desc?(row===null||row===void 0?void 0:(_row$desc=row.desc)===null||_row$desc===void 0?void 0:_row$desc.length)==50?(row===null||row===void 0?void 0:row.desc)+\"...\":row===null||row===void 0?void 0:row.desc:\"-\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footter\",children:[/*#__PURE__*/_jsx(IconText,{imageProfile:consts.s3url+(row===null||row===void 0?void 0:(_row$user=row.user)===null||_row$user===void 0?void 0:_row$user.profile),imageSize:32,text:row===null||row===void 0?void 0:(_row$user2=row.user)===null||_row$user2===void 0?void 0:_row$user2.name,isBold:true}),/*#__PURE__*/_jsx(IconText,{imageSrc:\"/images/icons/eye-line.svg\",imageSize:20,text:row===null||row===void 0?void 0:row.view}),/*#__PURE__*/_jsx(IconText,{imageSrc:\"/images/icons/message-3-line.svg\",imageSize:20,text:row===null||row===void 0?void 0:row.comment_cnt})]})]}),(row===null||row===void 0?void 0:(_row$files=row.files)===null||_row$files===void 0?void 0:_row$files.length)>0&&/*#__PURE__*/_jsx(\"img\",{src:consts.s3url+(row===null||row===void 0?void 0:row.files[0].file_path),alt:\"\"})]})},key);},scrollToIndex:0,scrollTop:scrollTop,width:width});}})});}})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}