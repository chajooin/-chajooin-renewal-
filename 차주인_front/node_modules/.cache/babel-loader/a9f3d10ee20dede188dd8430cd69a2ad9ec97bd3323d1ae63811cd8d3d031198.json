{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from'react-router-dom';import\"../../css/my/my-policy.css\";import Layout from\"../../layout/Layout\";import Button from'../../component/Button';import*as APIS from\"../../utils/service\";import{goBackPage,numFormat}from'../../utils/utils';import MyNavigator from'./components/MyNavigator';import consts from\"../../libs/consts\";import{API_URL}from'../../libs/apiUrl';import{close,loadingflas,open}from'../../redux/popupSlice';import{selectUserInfo}from'../../redux/userSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyPolicy(_ref){var _UserInfo$userInfo,_UserInfo$userInfo2;let{navigation}=_ref;const dispatch=useDispatch();const navigate=useNavigate();const params=new URLSearchParams(window.location.search);const UserInfo=useSelector(selectUserInfo);const policyData=consts.policyList.find(v=>v.type==params.get(\"idx\"));const[isLogin,setIsLogin]=useState(false);const[policyHTML,setPolicy]=useState(\"\");const goHomePopup=msg=>{dispatch(open({content:msg,onCancelPress:false,titleviewer:false,button:\"확인\",onPress:()=>{dispatch(close());navigate(\"/\");}}));};useEffect(()=>{console.log(\"render policy!\",policyData);let token=localStorage.getItem(\"token\");setIsLogin(token?true:false);if(policyData){APIS.postData(API_URL.commom.term,{type:policyData.type}).then(result=>{console.log(result.data);setPolicy(result.data);}).catch(e=>{console.log(e);goHomePopup(\"잠시 후 다시 시도하세요.\");});}else{goHomePopup(\"올바르지 않은 요청입니다.\");}},[]);return/*#__PURE__*/_jsx(Layout,{header:false,footters:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"myPolicyContain\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"global-titleBox bg_white fixed\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/back.svg\",alt:\"\",onClick:()=>{navigate(\"/mypage\",{replace:true});}}),/*#__PURE__*/_jsx(\"div\",{className:\"titleInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:policyData.title})}),isLogin&&/*#__PURE__*/_jsx(\"div\",{className:\"quick-alamContain\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",onClick:()=>{navigate(\"/message\");},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/mail-line.svg\",alt:\"\"}),((_UserInfo$userInfo=UserInfo.userInfo)===null||_UserInfo$userInfo===void 0?void 0:_UserInfo$userInfo.message_count)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"num\",children:(_UserInfo$userInfo2=UserInfo.userInfo)===null||_UserInfo$userInfo2===void 0?void 0:_UserInfo$userInfo2.message_count})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoBox margint60\",children:[/*#__PURE__*/_jsx(MyNavigator,{list:[{title:\"마이\"},{title:policyData.title,isSelect:true}]}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"contents\",dangerouslySetInnerHTML:{__html:policyHTML}})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}